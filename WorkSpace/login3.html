<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ì¸3</title>
</head>

<body>
    <h1 style="color : green">ğŸ€LOGINğŸ€</h1>

    <input type="text" id="id" placeholder="id" autofocus /><br />
    <input type="password" id="pw" placeholder="password" /><br />
    <button onclick="loginAction()">login</button>
    <a href="memberlist2.html"><button>memberlist2</button></a>
    <a href="home.html"><button>main</button></a>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        async function loginAction() {
            const url = 'http://ihongss.com:13000/api/member/login.json?_id=${id.value}';
            const headers = { "Content-Type": "application/json" };
            const body = {_id:id.value, password:pw.value};

            const { data } = await axios.post(url, body, {headers});
            console.log(data);
            
            if(data.status===200){
                alert('login succeed'); 
                // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ë¡œê·¸ì¸ ì •ë³´ ì €ì¥
                sessionStorage.setItem("token", data.token);
                // ì£¼ì†Œ ë°”ê¾¼ë‹¤ìŒ ì—”í„° ëˆ„ë¥´ë©´ í˜ì´ì§€ ì´ë™
                window.location.href="memberlist2.html";
            }
            else {
                alert ('login failed'); 
            }
        };
    </script>

</body>

</html>